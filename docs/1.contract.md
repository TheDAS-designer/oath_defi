# 编译合约
aptos move compile

# 部署合约
aptos move publish --assume-yes

# 初始化合约
aptos move run --function-id 0xa3228904a096599a799b74cb18ddd0eb0a78e49c07c119b80d597c804476b0e0::oath::init --assume-yes

# 创建 Oath
aptos move run --function-id 0xa3228904a096599a799b74cb18ddd0eb0a78e49c07c119b80d597c804476b0e0::oath::create_oath --args 'string:测试承诺' 'string:这是一个测试承诺，用于验证合约功能' 'string:技术学习' 'u64:100' 'u64:1672531200' --assume-yes

# 查询 Oath
aptos move view --function-id 0xa3228904a096599a799b74cb18ddd0eb0a78e49c07c119b80d597c804476b0e0::oath::get_oath --args 'address:0xa3228904a096599a799b74cb18ddd0eb0a78e49c07c119b80d597c804476b0e0' 'u64:1'

# 完成 Oath 并铸造 SBT
aptos move run --function-id 0xa3228904a096599a799b74cb18ddd0eb0a78e49c07c119b80d597c804476b0e0::oath::complete_oath_and_mint_sbt --args 'u64:1' 'u64:1672531300' --assume-yes

# 查询 SBT
aptos move view --function-id 0xa3228904a096599a799b74cb18ddd0eb0a78e49c07c119b80d597c804476b0e0::oath::get_sbt --args 'address:0xa3228904a096599a799b74cb18ddd0eb0a78e49c07c119b80d597c804476b0e0' 'u64:1'


# 测试

## vault

{
          "address": "0xe51F91e68D01530fbbCd3D2c9724E841C06ec827",
          "symbol": "Re7cbBTC",
          "name": "Re7 cbBTC",
          "whitelisted": false,
          "asset": {
            "id": "32e7e3f9-d951-4bb5-ba0f-92788ed20af2",
            "address": "0xcbB7C0000aB88B473b1f5aFd9ef808440eed33Bf",
            "decimals": 8
          }
}

## allocation

{
          "uniqueKey": "0xfff517c4ca7bb55befaacc7a17633d1e95dc748df37b92304fdeb019a17214ba",
          "lltv": "980000000000000000",
          "oracleAddress": "0xb5f856E6978b009A75f8E5197e7cf29Bc822181f",
          "irmAddress": "0x46415998764C29aB2a25CbeA6254146D50D22687",
          "loanAsset": {
            "address": "0xcbB7C0000aB88B473b1f5aFd9ef808440eed33Bf",
            "symbol": "cbBTC",
            "decimals": 8
          },
          "collateralAsset": {
            "address": "0xDa1C2c3C8FaD503662e41E324FC644Dc2c5e0CCD",
            "symbol": "GMORPHO",
            "decimals": 18
          },
          "state": {
            "borrowAssets": 3220169197337,
            "supplyAssets": 3220169197337,
            "fee": 0,
            "utilization": 1
          }
        },

## market
{
          "uniqueKey": "0xfff517c4ca7bb55befaacc7a17633d1e95dc748df37b92304fdeb019a17214ba",
          "lltv": "980000000000000000",
          "oracleAddress": "0xb5f856E6978b009A75f8E5197e7cf29Bc822181f",
          "irmAddress": "0x46415998764C29aB2a25CbeA6254146D50D22687",
          "loanAsset": {
            "address": "0xcbB7C0000aB88B473b1f5aFd9ef808440eed33Bf",
            "symbol": "cbBTC",
            "decimals": 8
          },
          "collateralAsset": {
            "address": "0xDa1C2c3C8FaD503662e41E324FC644Dc2c5e0CCD",
            "symbol": "GMORPHO",
            "decimals": 18
          },
          "state": {
            "borrowAssets": 3220169197337,
            "supplyAssets": 3220169197337,
            "fee": 0,
            "utilization": 1
          }
        },